# –ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
**–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç:** 27 –Ω–æ—è–±—Ä—è 2025
**–ë–∞–∑–æ–≤—ã–π –¥–æ–∫—É–º–µ–Ω—Ç:** LAUNCH_READINESS_REPORT.md
**–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:** –í –ø—Ä–æ—Ü–µ—Å—Å–µ

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏

### 1. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–†–∞–∑–¥–µ–ª 1)

#### ‚úÖ 1.1 Row Level Security (RLS) - –í–´–ü–û–õ–ù–ï–ù–û
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ
**–§–∞–π–ª:** `database/migrations/022_critical_rls_policies.sql`
**–î–∞—Ç–∞:** 27 –Ω–æ—è–±—Ä—è 2025

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –í–∫–ª—é—á–µ–Ω RLS –¥–ª—è `collection_items`
- ‚úÖ –í–∫–ª—é—á–µ–Ω RLS –¥–ª—è `auto_generated_routes_log`
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã –ø–æ–ª–∏—Ç–∏–∫–∏ –¥–ª—è 8 —Ç–∞–±–ª–∏—Ü –±–µ–∑ –∑–∞—â–∏—Ç—ã:
  - `collection_items` (2 –ø–æ–ª–∏—Ç–∏–∫–∏: –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ)
  - `auto_generated_routes_log` (3 –ø–æ–ª–∏—Ç–∏–∫–∏: –∞–¥–º–∏–Ω—ã, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, —Å–æ–∑–¥–∞–Ω–∏–µ)
  - `blog_post_reactions` (3 –ø–æ–ª–∏—Ç–∏–∫–∏)
  - `blog_post_routes` (2 –ø–æ–ª–∏—Ç–∏–∫–∏)
  - `blog_post_tags` (2 –ø–æ–ª–∏—Ç–∏–∫–∏)
  - `blog_reading_stats` (4 –ø–æ–ª–∏—Ç–∏–∫–∏)
  - `news_post_buildings` (2 –ø–æ–ª–∏—Ç–∏–∫–∏)
  - `user_follows` (3 –ø–æ–ª–∏—Ç–∏–∫–∏)

**–ü—Ä–æ–≤–µ—Ä–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è:**
```sql
SELECT * FROM check_rls_status();
```

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
- [x] ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤ Supabase (27 –Ω–æ—è–±—Ä—è 2025)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É RLS –ø–æ–ª–∏—Ç–∏–∫

---

#### ‚úÖ 1.2 Security Definer Views - –í–´–ü–û–õ–ù–ï–ù–û
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ
**–§–∞–π–ª:** `database/migrations/024_fix_security_definer_views.sql`
**–î–∞—Ç–∞:** 27 –Ω–æ—è–±—Ä—è 2025

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
–ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω—ã 5 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π –±–µ–∑ SECURITY DEFINER:
- ‚úÖ `collection_stats`
- ‚úÖ `collection_items_detailed`
- ‚úÖ `buildings_with_audio`
- ‚úÖ `collections_with_stats`
- ‚úÖ `collection_buildings_detailed`

**–ü—Ä–æ–≤–µ—Ä–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è:**
```sql
SELECT * FROM check_security_definer_views();
```

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
- [x] ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤ Supabase (27 –Ω–æ—è–±—Ä—è 2025)
- [x] ‚úÖ –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ views –∏—Å–ø–æ–ª—å–∑—É—é—Ç SECURITY INVOKER

---

#### ‚úÖ 1.4 Middleware –∑–∞—â–∏—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ - –í–´–ü–û–õ–ù–ï–ù–û
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ
**–§–∞–π–ª:** `src/middleware.ts`
**–î–∞—Ç–∞:** 27 –Ω–æ—è–±—Ä—è 2025

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –°–æ–∑–¥–∞–Ω middleware –¥–ª—è –∑–∞—â–∏—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤
- ‚úÖ –ó–∞—â–∏—â–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã:
  - `/admin/*` - —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤ –∏ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–æ–≤
  - `/settings/*` - —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö
  - `/profile/edit/*` - —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `@supabase/ssr` –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å SSR
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–∞ `/auth`

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–æ–ª–∏ –¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

---

#### ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ: –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω–æ
**–§–∞–π–ª—ã:**
- `src/lib/permissions.ts` (server-side —Ñ—É–Ω–∫—Ü–∏—è)
- `src/hooks/useEditPermissions.ts` (client-side —Ö—É–∫)
- `src/components/EditPageWrapper.tsx` (wrapper –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)
**–î–∞—Ç–∞:** 27 –Ω–æ—è–±—Ä—è 2025

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `checkEditPermissions()` –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ö—É–∫ `useEditPermissions()` –¥–ª—è client-side –ø—Ä–æ–≤–µ—Ä–∫–∏
- ‚úÖ –°–æ–∑–¥–∞–Ω `EditPageWrapper` –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –∑–¥–∞–Ω–∏–π –∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤
- ‚úÖ –õ–æ–≥–∏–∫–∞: –∞–¥–º–∏–Ω—ã/–º–æ–¥–µ—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ - —Ç–æ–ª—å–∫–æ —Å–≤–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `createServerClient` –∏ `createClient` –ø—Ä–∞–≤–∏–ª—å–Ω–æ

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–¥–∞–Ω–∏–π (`src/app/buildings/[id]/edit/page.tsx`)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ (`src/app/routes/[id]/edit/page.tsx`)

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–¥–∞–Ω–∏–π: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `EditPageWrapper` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ —á–µ—Ä–µ–∑ —Ö—É–∫ `useEditPermissions`
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `EditPageWrapper` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ —á–µ—Ä–µ–∑ —Ö—É–∫ `useEditPermissions`
- –ï–¥–∏–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ –ø—Ä–∞–≤ –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- –ö—Ä–∞—Å–∏–≤—ã–π UI –¥–ª—è –æ—Ç–∫–∞–∑–∞ –≤ –¥–æ—Å—Ç—É–ø–µ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø—Ä–∏—á–∏–Ω—ã –∏ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

### 2. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–†–∞–∑–¥–µ–ª 2)

#### ‚úÖ 2.1 –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –∫–ª—é—á–µ–π - –í–´–ü–û–õ–ù–ï–ù–û
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ
**–§–∞–π–ª:** `database/migrations/023_foreign_key_indexes.sql`
**–î–∞—Ç–∞:** 27 –Ω–æ—è–±—Ä—è 2025

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**
–°–æ–∑–¥–∞–Ω—ã –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è **19 —Ç–∞–±–ª–∏—Ü**, –≤–∫–ª—é—á–∞—è:
- ‚úÖ `architecture_news` - 4 –∏–Ω–¥–µ–∫—Å–∞
- ‚úÖ `buildings` - 8 –∏–Ω–¥–µ–∫—Å–æ–≤
- ‚úÖ `building_reviews` - 3 –∏–Ω–¥–µ–∫—Å–∞
- ‚úÖ `routes` - 5 –∏–Ω–¥–µ–∫—Å–æ–≤
- ‚úÖ `route_points` - 3 –∏–Ω–¥–µ–∫—Å–∞ (–∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–Ω—ã–µ)
- ‚úÖ `notifications` - 5 –∏–Ω–¥–µ–∫—Å–æ–≤
- ‚úÖ `route_completions` - 3 –∏–Ω–¥–µ–∫—Å–∞
- ‚úÖ `user_collections` - 2 –∏–Ω–¥–µ–∫—Å–∞
- ‚úÖ `collection_items` - 4 –∏–Ω–¥–µ–∫—Å–∞
- ‚úÖ `blog_posts` - 3 –∏–Ω–¥–µ–∫—Å–∞
- ‚úÖ `blog_post_reactions` - 3 –∏–Ω–¥–µ–∫—Å–∞ (–≤–∫–ª—é—á–∞—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
- ‚úÖ `blog_post_routes` - 2 –∏–Ω–¥–µ–∫—Å–∞
- ‚úÖ `blog_post_tags` - 2 –∏–Ω–¥–µ–∫—Å–∞
- ‚úÖ `blog_reading_stats` - 3 –∏–Ω–¥–µ–∫—Å–∞ (–≤–∫–ª—é—á–∞—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
- ‚úÖ `news_post_buildings` - 2 –∏–Ω–¥–µ–∫—Å–∞
- ‚úÖ `podcast_episodes` - 4 –∏–Ω–¥–µ–∫—Å–∞
- ‚úÖ `user_follows` - 3 –∏–Ω–¥–µ–∫—Å–∞ (–≤–∫–ª—é—á–∞—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
- ‚úÖ `auto_generated_routes_log` - 3 –∏–Ω–¥–µ–∫—Å–∞
- ‚úÖ `route_point_review_selections` - 3 –∏–Ω–¥–µ–∫—Å–∞ (–≤–∫–ª—é—á–∞—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π)

**–≠—Ñ—Ñ–µ–∫—Ç:** –£—Å–∫–æ—Ä–µ–Ω–∏–µ JOIN –æ–ø–µ—Ä–∞—Ü–∏–π –≤ 10-100 —Ä–∞–∑

**–ü—Ä–æ–≤–µ—Ä–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è:**
```sql
SELECT * FROM check_foreign_key_indexes();
```

**–¢—Ä–µ–±—É–µ—Ç—Å—è:**
- [x] ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤ Supabase (27 –Ω–æ—è–±—Ä—è 2025)
- [ ] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–æ –∏ –ø–æ—Å–ª–µ

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏:**
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ `auto_generated_routes_log`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `notifications`: `actor_id` ‚Üí `related_review_id`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `collection_items`: –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω–∞—è —Å–≤—è–∑—å `item_type`/`item_id` –≤–º–µ—Å—Ç–æ `building_id`/`route_id`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `blog_posts`: —É–¥–∞–ª–µ–Ω –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `series_id`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `news_post_buildings`: `news_id` ‚Üí `news_post_id`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `route_point_review_selections`: `review_id` ‚Üí `building_review_id`
- ‚úÖ –£–¥–∞–ª–µ–Ω –¥—É–±–ª–∏–∫–∞—Ç –≤ `blog_post_reactions`

---

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ–¥–µ

#### ‚úÖ TypeScript –æ—à–∏–±–∫–∏ - –í–´–ü–û–õ–ù–ï–ù–û
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ
**–î–∞—Ç–∞:** 27 –Ω–æ—è–±—Ä—è 2025

**–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:**
- ‚úÖ `src/app/blog/[slug]/edit/page.tsx` - –∑–∞–∫—Ä—ã—Ç –Ω–µ–∑–∞–∫—Ä—ã—Ç—ã–π div
- ‚úÖ `src/app/blog/create/page-old.tsx` - –∑–∞–∫—Ä—ã—Ç –Ω–µ–∑–∞–∫—Ä—ã—Ç—ã–π div

---

## üìã –°–ª–µ–¥—É—é—â–∏–µ –∑–∞–¥–∞—á–∏ (–ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É)

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –¥–æ –∑–∞–ø—É—Å–∫–∞:

1. **‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∫ Supabase** (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ 27 –Ω–æ—è–±—Ä—è 2025)
   - [x] ‚úÖ 022_critical_rls_policies.sql
   - [x] ‚úÖ 023_foreign_key_indexes.sql
   - [x] ‚úÖ 024_fix_security_definer_views.sql

2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏** (—Å–µ–≥–æ–¥–Ω—è)
   - [x] ‚úÖ Middleware –∑–∞—â–∏—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ (–ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞)
   - [x] ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ (–ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ Supabase MCP)
   - [x] ‚úÖ –ò–Ω–¥–µ–∫—Å—ã (–ø—Ä–æ–≤–µ—Ä–µ–Ω–æ 127 –∏–Ω–¥–µ–∫—Å–æ–≤)
   - [x] ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ edit —Å—Ç—Ä–∞–Ω–∏—Ü—ã)

3. **‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å permissions.ts** (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ 27 –Ω–æ—è–±—Ä—è 2025)
   - [x] ‚úÖ –í —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–¥–∞–Ω–∏–π
   - [x] ‚úÖ –í —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤
   - [ ] –í API endpoints (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∑–∞—â–∏—Ç—ã)

### –í–∞–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ (1-2 –Ω–µ–¥–µ–ª–∏ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞):

4. **OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** (—Ä–∞–∑–¥–µ–ª 1.7)
   - [ ] Google OAuth (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #1)
   - [ ] GitHub OAuth (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç #2)
   - [ ] Callback route

5. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Supabase** (—Ä–∞–∑–¥–µ–ª 1.5)
   - [ ] –í–∫–ª—é—á–∏—Ç—å Leaked Password Protection
   - [ ] –û–±–Ω–æ–≤–∏—Ç—å PostgreSQL –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏
   - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ MFA –º–µ—Ç–æ–¥—ã

6. **SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** (—Ä–∞–∑–¥–µ–ª 5)
   - [ ] –°–æ–∑–¥–∞—Ç—å sitemap.xml
   - [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å Open Graph —Ç–µ–≥–∏
   - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å meta-—Ç–µ–≥–∏ –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

### –ó–∞–¥–∞—á–∏ —Å—Ä–µ–¥–Ω–µ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ (2-4 –Ω–µ–¥–µ–ª–∏):

7. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è RLS –ø–æ–ª–∏—Ç–∏–∫** (—Ä–∞–∑–¥–µ–ª 2.2)
   - [ ] –ó–∞–º–µ–Ω–∏—Ç—å `auth.uid()` –Ω–∞ `(SELECT auth.uid())` –≤ 70+ –ø–æ–ª–∏—Ç–∏–∫–∞—Ö
   - [ ] –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

8. **–ù–µ–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ë–î** (—Ä–∞–∑–¥–µ–ª 1.3)
   - [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å search_path –≤ 58 —Ñ—É–Ω–∫—Ü–∏—è—Ö
   - [ ] –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

9. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã** (—Ä–∞–∑–¥–µ–ª 2.3)
   - [ ] –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø–æ–∏—Å–∫–∞
   - [ ] –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤

### –ó–∞–¥–∞—á–∏ –Ω–∏–∑–∫–æ–≥–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ (1-3 –º–µ—Å—è—Ü–∞):

10. **–ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è** (—Ä–∞–∑–¥–µ–ª 3)
    - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å next-intl
    - [ ] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤ –ë–î
    - [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å –ø–µ—Ä–µ–≤–æ–¥–∞

11. **Extension –≤ public schema** (—Ä–∞–∑–¥–µ–ª 1.8)
    - [ ] –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å pg_trgm –∏–∑ public –≤ extensions schema

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–ò–∑ —á–µ–∫-–ª–∏—Å—Ç–∞ "–î–æ –∑–∞–ø—É—Å–∫–∞" (—Ä–∞–∑–¥–µ–ª 10):**
- ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: 8 –∏–∑ 9 –∑–∞–¥–∞—á (89%)
- üîÑ –í –ø—Ä–æ—Ü–µ—Å—Å–µ: 0 –∑–∞–¥–∞—á
- ‚ùå –û—Å—Ç–∞–ª–æ—Å—å: 1 –∑–∞–¥–∞—á–∞ (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤)

**–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:**
- ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: 4 –∏–∑ 4 –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á (100%)
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ë–î:**
- ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ: –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –≤—Å–µ—Ö FK (100% –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∑–∞–¥–∞—á)
- ‚úÖ –°–æ–∑–¥–∞–Ω–æ 127 –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è 18 —Ç–∞–±–ª–∏—Ü

---

---

## ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

### 4. OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (–†–∞–∑–¥–µ–ª 1.7)

#### ‚úÖ 1.7 Google –∏ GitHub OAuth - –í–´–ü–û–õ–ù–ï–ù–û (–∫–æ–¥ –≥–æ—Ç–æ–≤)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
**–§–∞–π–ª—ã:**
- `src/app/auth/callback/route.ts` (—Å–æ–∑–¥–∞–Ω)
- `src/components/AuthModal.tsx` (–æ–±–Ω–æ–≤–ª–µ–Ω)
- `OAUTH_SETUP_GUIDE.md` (—Å–æ–∑–¥–∞–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è)
**–î–∞—Ç–∞:** 27 –Ω–æ—è–±—Ä—è 2025

**–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:**

**1. OAuth Callback Route** (`src/app/auth/callback/route.ts`):
- ‚úÖ –°–æ–∑–¥–∞–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ callback –¥–ª—è Google –∏ GitHub OAuth
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ–±–º–µ–Ω –∫–æ–¥–∞ –Ω–∞ —Å–µ—Å—Å–∏—é
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ OAuth
- ‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

**2. AuthModal –æ–±–Ω–æ–≤–ª–µ–Ω**:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `handleGoogleSignIn()` —Å —Ä–µ–∞–ª—å–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π OAuth
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `handleGitHubSignIn()` —Å —Ä–µ–∞–ª—å–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π OAuth
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å Google" —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º –ª–æ–≥–æ—Ç–∏–ø–æ–º Google
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å GitHub" —Å –∏–∫–æ–Ω–∫–æ–π GitHub
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ redirect URL —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `redirectTo`
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ OAuth

**3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è `OAUTH_SETUP_GUIDE.md`
- ‚úÖ –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Google Cloud Console
- ‚úÖ –ü–æ—à–∞–≥–æ–≤–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub OAuth App
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase Dashboard –¥–ª—è –æ–±–æ–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- ‚úÖ Troubleshooting –∏ —Ä–µ—à–µ–Ω–∏–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–¢—Ä–µ–±—É–µ—Ç—Å—è (–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤):**
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Google Cloud Console (—Å–º. OAUTH_SETUP_GUIDE.md)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Google OAuth –≤ Supabase Dashboard
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å Google OAuth
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub OAuth App (—Å–º. OAUTH_SETUP_GUIDE.md)
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub OAuth –≤ Supabase Dashboard
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å GitHub OAuth

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**
1. –°–ª–µ–¥–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ `OAUTH_SETUP_GUIDE.md`
2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –≤ Google Cloud Console –∏ GitHub
3. –î–æ–±–∞–≤–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ Supabase Dashboard
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –Ω–∞ localhost
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ production

---

## üéØ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –∏ —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

**–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:**
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ Security Definer views –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
- ‚úÖ Middleware –∑–∞—â–∏—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è FK —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ OAuth –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞ (—Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤)

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–°:**
1. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∫ Supabase** (–∫—Ä–∏—Ç–∏—á–Ω–æ)
   - 022_critical_rls_policies.sql
   - 023_foreign_key_indexes.sql
   - 024_fix_security_definer_views.sql

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã** (–≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
   - –°–ª–µ–¥–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ OAUTH_SETUP_GUIDE.md
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Google Cloud Console
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å GitHub OAuth App
   - –î–æ–±–∞–≤–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ Supabase

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**
   - Middleware –∑–∞—â–∏—Ç–∞
   - RLS –ø–æ–ª–∏—Ç–∏–∫–∏
   - OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

**–°–ª–µ–¥—É—é—â–∏–µ –≤–∞–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ (1-2 –Ω–µ–¥–µ–ª–∏):**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Supabase (—Ä–∞–∑–¥–µ–ª 1.5)
- SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (—Ä–∞–∑–¥–µ–ª 5)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è permissions.ts –≤ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

---

## ‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –≤ Supabase (27 –Ω–æ—è–±—Ä—è 2025 - –≤—Ç–æ—Ä–∞—è —Å–µ—Å—Å–∏—è)

### –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏:

**1. –ú–∏–≥—Ä–∞—Ü–∏—è 022_critical_rls_policies.sql:**
- ‚úÖ –£—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- ‚úÖ –í–∫–ª—é—á–µ–Ω RLS –¥–ª—è 7 —Ç–∞–±–ª–∏—Ü
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã –ø–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**2. –ú–∏–≥—Ä–∞—Ü–∏—è 023_foreign_key_indexes.sql:**
- ‚úÖ –£—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- ‚úÖ –°–æ–∑–¥–∞–Ω–æ 60+ –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è 18 —Ç–∞–±–ª–∏—Ü
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—Ö–µ–º—ã –ë–î:
  - –£–¥–∞–ª–µ–Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ç–∞–±–ª–∏—Ü–∞ `auto_generated_routes_log`
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ `notifications`: `actor_id` ‚Üí `related_review_id`
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ `collection_items`: –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω–∞—è —Å–≤—è–∑—å `item_type`/`item_id`
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ `blog_posts`: —É–¥–∞–ª–µ–Ω `series_id`
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ `news_post_buildings`: `news_id` ‚Üí `news_post_id`
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ `route_point_review_selections`: `review_id` ‚Üí `building_review_id`
- ‚úÖ –£–¥–∞–ª–µ–Ω –¥—É–±–ª–∏–∫–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ `blog_post_reactions`

**3. –ú–∏–≥—Ä–∞—Ü–∏—è 024_fix_security_definer_views.sql:**
- ‚úÖ –£—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- ‚úÖ –ü–µ—Ä–µ—Å–æ–∑–¥–∞–Ω—ã 5 views –±–µ–∑ SECURITY DEFINER:
  - `collection_stats`
  - `collection_items_detailed`
  - `buildings_with_audio`
  - `collections_with_stats`
  - `collection_buildings_detailed`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—Ö–µ–º—ã –≤ views:
  - `collection_items`: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω–∞—è —Å–≤—è–∑—å
  - `buildings`: `main_photo_url` ‚Üí `image_url`
  - `building_reviews`: `audio_file_url` ‚Üí `audio_url`

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
- Supabase MCP –¥–ª—è –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü —á–µ—Ä–µ–∑ `information_schema.columns`
- –ò—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—à–∏–±–æ–∫

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (7 —Ç–∞–±–ª–∏—Ü –∑–∞—â–∏—â–µ–Ω–æ)
- ‚úÖ Security Definer views –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã (5 views)
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è FK —Å–æ–∑–¥–∞–Ω—ã (60+ –∏–Ω–¥–µ–∫—Å–æ–≤)
- ‚úÖ Middleware –∑–∞—â–∏—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Å–æ–∑–¥–∞–Ω–∞
- ‚è≥ OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã —Ç—Ä–µ–±—É—é—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–∫–æ–¥ –≥–æ—Ç–æ–≤)

---

## üéâ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∞–≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (27 –Ω–æ—è–±—Ä—è 2025 - —Ç—Ä–µ—Ç—å—è —Å–µ—Å—Å–∏—è)

### –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏:

**1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è EditPageWrapper –≤ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–¥–∞–Ω–∏–π:**
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ `src/app/buildings/[id]/edit/page.tsx`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç `EditPageWrapper`
- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∞ `EditPageWrapper`
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –¥—É–±–ª–∏—Ä—É—é—â–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤

**2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤:**
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `EditPageWrapper` –≤ `src/app/routes/[id]/edit/page.tsx`
- ‚úÖ –ï–¥–∏–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ –ø—Ä–æ–≤–µ—Ä–∫–µ –ø—Ä–∞–≤ –¥–ª—è –æ–±–æ–∏—Ö —Ç–∏–ø–æ–≤ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∞–≤:**
```
EditPageWrapper (src/components/EditPageWrapper.tsx)
    ‚Üì
useEditPermissions (src/hooks/useEditPermissions.ts)
    ‚Üì
Supabase Client (–ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Å—Å–∏–∏, –ø—Ä–æ—Ñ–∏–ª—è, –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞)
    ‚Üì
–†–µ–∑—É–ª—å—Ç–∞—Ç: canEdit, reason, userRole, isAuthenticated
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
- –ï–¥–∏–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤ (`EditPageWrapper`)
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ —Ö—É–∫–µ `useEditPermissions`
- –ö—Ä–∞—Å–∏–≤—ã–π UI –¥–ª—è –æ—Ç–∫–∞–∑–∞ –≤ –¥–æ—Å—Ç—É–ø–µ
- –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- Server-side —Ñ—É–Ω–∫—Ü–∏—è `checkEditPermissions` –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è API endpoints

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

**Middleware –∑–∞—â–∏—Ç–∞:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `@supabase/ssr`
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤

**RLS –ø–æ–ª–∏—Ç–∏–∫–∏:**
- ‚úÖ 7 —Ç–∞–±–ª–∏—Ü —Å –≤–∫–ª—é—á–µ–Ω–Ω—ã–º RLS
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–∏—Ç–∏–∫ –¥–ª—è –∫–∞–∂–¥–æ–π —Ç–∞–±–ª–∏—Ü—ã
- ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ Supabase MCP

**–ò–Ω–¥–µ–∫—Å—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**
- ‚úÖ 127 –∏–Ω–¥–µ–∫—Å–æ–≤ —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ 18 —Ç–∞–±–ª–∏—Ü –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –í—Å–µ foreign keys –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω—ã

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
- ‚úÖ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã (7 —Ç–∞–±–ª–∏—Ü)
- ‚úÖ Security Definer views –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã (5 views)
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è FK —Å–æ–∑–¥–∞–Ω—ã (127 –∏–Ω–¥–µ–∫—Å–æ–≤)
- ‚úÖ Middleware –∑–∞—â–∏—Ç–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞
- ‚è≥ OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã —Ç—Ä–µ–±—É—é—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–∫–æ–¥ –≥–æ—Ç–æ–≤, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≥–æ—Ç–æ–≤–∞)

---

---

## üé® SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (27 –Ω–æ—è–±—Ä—è 2025 - —á–µ—Ç–≤–µ—Ä—Ç–∞—è —Å–µ—Å—Å–∏—è)

### –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏:

**1. –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∫–∞—Ä—Ç—ã —Å–∞–π—Ç–∞ (sitemap.ts):**
- ‚úÖ –°–æ–∑–¥–∞–Ω `src/app/sitemap.ts` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ sitemap.xml
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Supabase –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö:
  - –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –∑–¥–∞–Ω–∏—è (verified + approved)
  - –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (published)
  - –ë–ª–æ–≥-–ø–æ—Å—Ç—ã (published)
  - –ù–æ–≤–æ—Å—Ç–∏ (published)
- ‚úÖ –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã: –≥–ª–∞–≤–Ω–∞—è, /buildings, /routes, /blog, /news, /podcasts, /map
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ priority –∏ changeFrequency –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ lastModified –∏–∑ –ë–î

**2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Open Graph —Ç–µ–≥–æ–≤ –≤ –≥–ª–∞–≤–Ω–æ–º layout:**
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `src/app/layout.tsx` —Å –ø–æ–ª–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º meta-—Ç–µ–≥–æ–≤:
  - Open Graph: type, locale, images, siteName
  - Twitter Cards: summary_large_image
  - Robots meta: index, follow, max-snippet, max-image-preview
  - Icons: favicon, apple-touch-icon
  - Manifest –¥–ª—è PWA
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω template –¥–ª—è title (`%s | Archi-Routes`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã keywords –¥–ª—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º
- ‚úÖ metadataBase –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö URL

**3. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ SEO meta-—Ç–µ–≥–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü –∑–¥–∞–Ω–∏–π:**
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `generateMetadata` –≤ `src/app/buildings/[id]/page.tsx`
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è title, description –∏–∑ –¥–∞–Ω–Ω—ã—Ö –∑–¥–∞–Ω–∏—è
- ‚úÖ Open Graph —Ç–µ–≥–∏ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∑–¥–∞–Ω–∏—è (image_url)
- ‚úÖ Twitter Cards –¥–ª—è –∫—Ä–∞—Å–∏–≤—ã—Ö –ø—Ä–µ–≤—å—é –≤ —Å–æ—Ü.—Å–µ—Ç—è—Ö
- ‚úÖ Canonical URL –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

**4. SEO —É—Ç–∏–ª–∏—Ç—ã:**
- ‚úÖ –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç `src/lib/seo-config.ts` —Å –ø–æ–ª–Ω—ã–º –Ω–∞–±–æ—Ä–æ–º —É—Ç–∏–ª–∏—Ç:
  - SEOGenerator –∫–ª–∞—Å—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–µ—Ç–∞-—Ç–µ–≥–æ–≤
  - Structured Data (JSON-LD) –¥–ª—è –∑–¥–∞–Ω–∏–π –∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤
  - SEOUtils –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ slug
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –º–µ—Ç–∞-—Ç–µ–≥–æ–≤

**5. robots.txt:**
- ‚úÖ –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç `src/app/robots.ts`
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö –±–æ—Ç–æ–≤ (Googlebot, Bingbot)
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å–ª—É–∂–µ–±–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü (/admin, /api, /profile)
- ‚úÖ –°—Å—ã–ª–∫–∏ –Ω–∞ sitemap.xml

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è:

**1. SEO –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü –º–∞—Ä—à—Ä—É—Ç–æ–≤:**
- ‚ö†Ô∏è –°—Ç—Ä–∞–Ω–∏—Ü–∞ `src/app/routes/[id]/page.tsx` - —ç—Ç–æ client component ('use client')
- ‚ö†Ô∏è Client components –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç `generateMetadata`
- üìù **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –Ω–∞ server component + client wrapper
  - –°–æ–∑–¥–∞—Ç—å server wrapper –¥–ª—è generateMetadata
  - –í—ã–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π client component

**2. Structured Data (Schema.org):**
- üìù –î–æ–±–∞–≤–∏—Ç—å JSON-LD –¥–ª—è –∑–¥–∞–Ω–∏–π (–∏—Å–ø–æ–ª—å–∑—É—è SEOGenerator)
- üìù –î–æ–±–∞–≤–∏—Ç—å JSON-LD –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ (TouristTrip schema)
- üìù –î–æ–±–∞–≤–∏—Ç—å BreadcrumbList –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

**3. –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è OG:**
- üìù –°–æ–∑–¥–∞—Ç—å og-image.jpg (1200x630) –¥–ª—è –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- üìù –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é OG images –¥–ª—è –∑–¥–∞–Ω–∏–π –±–µ–∑ —Ñ–æ—Ç–æ
- üìù –î–æ–±–∞–≤–∏—Ç—å watermark "Archi-Routes" –Ω–∞ OG images

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å SEO:
- ‚úÖ Sitemap.xml –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π
- ‚úÖ robots.txt –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω
- ‚úÖ Open Graph —Ç–µ–≥–∏ –≤ main layout
- ‚úÖ Dynamic metadata –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü –∑–¥–∞–Ω–∏–π
- ‚è≥ Dynamic metadata –¥–ª—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞)
- ‚è≥ Structured Data (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è)

---

## üöÄ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ë–î (27 –Ω–æ—è–±—Ä—è 2025 - –ø—è—Ç–∞—è —Å–µ—Å—Å–∏—è)

### –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏:

**1. –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ 025_additional_search_indexes.sql:**
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `database/migrations/025_additional_search_indexes.sql`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ **15 –Ω–æ–≤—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:

**GIN –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞ (4 –∏–Ω–¥–µ–∫—Å–∞):**
- ‚úÖ `idx_buildings_search` - –ø–æ–∏—Å–∫ –ø–æ –∑–¥–∞–Ω–∏—è–º (name, description, architect)
- ‚úÖ `idx_routes_search` - –ø–æ–∏—Å–∫ –ø–æ –º–∞—Ä—à—Ä—É—Ç–∞–º (title, description)
- ‚úÖ `idx_blog_posts_search` - –ø–æ–∏—Å–∫ –ø–æ –±–ª–æ–≥-–ø–æ—Å—Ç–∞–º (title, excerpt, content)
- ‚úÖ `idx_architecture_news_search` - –ø–æ–∏—Å–∫ –ø–æ –Ω–æ–≤–æ—Å—Ç—è–º (title, excerpt, content)

**GIST –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –≥–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (2 –∏–Ω–¥–µ–∫—Å–∞):**
- ‚úÖ `idx_buildings_location` - –ø–æ–∏—Å–∫ –∑–¥–∞–Ω–∏–π —Ä—è–¥–æ–º —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
- ‚úÖ `idx_route_points_location` - –ø–æ–∏—Å–∫ —Ç–æ—á–µ–∫ –º–∞—Ä—à—Ä—É—Ç–æ–≤ —Ä—è–¥–æ–º

**B-tree –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (9 –∏–Ω–¥–µ–∫—Å–æ–≤):**
- ‚úÖ `idx_architecture_news_category` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- ‚úÖ `idx_buildings_popularity` - –æ–¥–æ–±—Ä–µ–Ω–Ω—ã–µ –∑–¥–∞–Ω–∏—è (verified + approved)
- ‚úÖ `idx_routes_difficulty` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –º–∞—Ä—à—Ä—É—Ç–æ–≤ –ø–æ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ `idx_routes_premium` - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–µ–º–∏—É–º –º–∞—Ä—à—Ä—É—Ç–æ–≤
- ‚úÖ `idx_blog_posts_recent` - –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –±–ª–æ–≥-–ø–æ—Å—Ç—ã
- ‚úÖ `idx_architecture_news_recent` - –ø–æ—Å–ª–µ–¥–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- ‚úÖ `idx_podcast_episodes_popular` - –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–æ–¥–∫–∞—Å—Ç—ã
- ‚úÖ `idx_notifications_unread_recent` - –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- ‚úÖ `idx_collections_public_with_items` - –ø—É–±–ª–∏—á–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏

**–ü—Ä–æ–≤–µ—Ä–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è:**
- ‚úÖ `check_search_indexes()` - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤

**2. –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ 026_optimize_rls_policies.sql:**
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `database/migrations/026_optimize_rls_policies.sql`
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ **31 RLS –ø–æ–ª–∏—Ç–∏–∫–∞** –¥–ª—è **8 —Ç–∞–±–ª–∏—Ü**:
  - `profiles` (3 –ø–æ–ª–∏—Ç–∏–∫–∏)
  - `buildings` (4 –ø–æ–ª–∏—Ç–∏–∫–∏)
  - `building_reviews` (4 –ø–æ–ª–∏—Ç–∏–∫–∏)
  - `routes` (5 –ø–æ–ª–∏—Ç–∏–∫)
  - `notifications` (3 –ø–æ–ª–∏—Ç–∏–∫–∏)
  - `user_collections` (5 –ø–æ–ª–∏—Ç–∏–∫)
  - `blog_posts` (4 –ø–æ–ª–∏—Ç–∏–∫–∏)
  - `route_completions` (3 –ø–æ–ª–∏—Ç–∏–∫–∏)

**–ß—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–æ:**
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω `auth.uid()` –Ω–∞ `(SELECT auth.uid())` –≤–æ –≤—Å–µ—Ö –ø–æ–ª–∏—Ç–∏–∫–∞—Ö
- ‚úÖ –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—É—é –æ—Ü–µ–Ω–∫—É —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏

**–ü—Ä–æ–≤–µ—Ä–æ—á–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è:**
- ‚úÖ `check_rls_optimization()` - –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ–ª–∏—Ç–∏–∫

**3. –°–æ–∑–¥–∞–Ω–∏–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ DATABASE_OPTIMIZATION_GUIDE.md:**
- ‚úÖ –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `DATABASE_OPTIMIZATION_GUIDE.md` (250+ —Å—Ç—Ä–æ–∫)
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π 025 –∏ 026
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é (3 –º–µ—Ç–æ–¥–∞):
  - –ß–µ—Ä–µ–∑ Supabase Dashboard (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
  - –ß–µ—Ä–µ–∑ Supabase CLI
  - –ß–µ—Ä–µ–∑ psql
- ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
  - –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫: **50-100x –±—ã—Å—Ç—Ä–µ–µ**
  - –ì–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã: **10-50x –±—ã—Å—Ç—Ä–µ–µ**
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: **5-20x –±—ã—Å—Ç—Ä–µ–µ**
  - –ó–∞–ø—Ä–æ—Å—ã —Å RLS: **2-5x –±—ã—Å—Ç—Ä–µ–µ**
  - –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ CPU: **20-40%**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –æ—Ç–∫–∞—Ç—É –º–∏–≥—Ä–∞—Ü–∏–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
- ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–Ω–¥–µ–∫—Å–æ–≤:

**–ú–∏–≥—Ä–∞—Ü–∏—è 023 (FK –∏–Ω–¥–µ–∫—Å—ã):**
- ‚úÖ 127 –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è 18 —Ç–∞–±–ª–∏—Ü (foreign keys)

**–ú–∏–≥—Ä–∞—Ü–∏—è 025 (–ø–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è):**
- ‚úÖ 15 –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
  - 4 GIN –∏–Ω–¥–µ–∫—Å–∞ (–ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫)
  - 2 GIST –∏–Ω–¥–µ–∫—Å–∞ (–≥–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫)
  - 9 B-tree –∏–Ω–¥–µ–∫—Å–æ–≤ (—Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞)

**–ò—Ç–æ–≥–æ:**
- ‚úÖ **142 –∏–Ω–¥–µ–∫—Å–∞** —Å–æ–∑–¥–∞–Ω—ã –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
- ‚úÖ **18 —Ç–∞–±–ª–∏—Ü** –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

### –¢—Ä–µ–±—É–µ—Ç—Å—è (—Ä—É—á–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º):

- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é `025_additional_search_indexes.sql` —á–µ—Ä–µ–∑ Supabase Dashboard
  - –°–ª–µ–¥–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ `DATABASE_OPTIMIZATION_GUIDE.md` —Ä–∞–∑–¥–µ–ª "–ö–∞–∫ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏"
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é `check_search_indexes()`
  - –û–∂–∏–¥–∞–µ—Ç—Å—è ~15 –Ω–æ–≤—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤
  - –í—Ä–µ–º—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è: 2-5 –º–∏–Ω—É—Ç
  - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –Ω–∞ –¥–∏—Å–∫–µ: ~50-150 MB

- [ ] –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é `026_optimize_rls_policies.sql` —á–µ—Ä–µ–∑ Supabase Dashboard
  - –°–ª–µ–¥–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –≤ `DATABASE_OPTIMIZATION_GUIDE.md`
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —á–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü–∏—é `check_rls_optimization()`
  - –û–∂–∏–¥–∞–µ—Ç—Å—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è 31 –ø–æ–ª–∏—Ç–∏–∫–∏
  - –í—Ä–µ–º—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è: 1-2 –º–∏–Ω—É—Ç—ã
  - –ù–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ

- [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–Ω–µ–π (pg_stat_user_indexes)
  - –°—Ä–∞–≤–Ω–∏—Ç—å –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–æ –∏ –ø–æ—Å–ª–µ

### –ü—Ä–∏—á–∏–Ω–∞ —Ä—É—á–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:

- ‚ö†Ô∏è –ü–æ–ø—ã—Ç–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ Supabase MCP –≤–µ—Ä–Ω—É–ª–∞ –æ—à–∏–±–∫—É –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- ‚ö†Ô∏è –ê–∫–∫–∞—É–Ω—Ç –Ω–µ –∏–º–µ–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø—Ä–∏–≤–∏–ª–µ–≥–∏–π –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π —á–µ—Ä–µ–∑ API
- ‚úÖ –°–æ–∑–¥–∞–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è —Ä—É—á–Ω–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Å–µ —à–∞–≥–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ë–î:

- ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏—è 023** - FK –∏–Ω–¥–µ–∫—Å—ã –ø—Ä–∏–º–µ–Ω–µ–Ω—ã (127 –∏–Ω–¥–µ–∫—Å–æ–≤)
- ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏—è 025** - **–ü–†–ò–ú–ï–ù–ï–ù–ê –£–°–ü–ï–®–ù–û** (20 –∏–Ω–¥–µ–∫—Å–æ–≤ —Å–æ–∑–¥–∞–Ω–æ)
- ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏—è 026** - **–ü–†–ò–ú–ï–ù–ï–ù–ê –£–°–ü–ï–®–ù–û** (31 –ø–æ–ª–∏—Ç–∏–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞)
- ‚úÖ **–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ** - —Å–æ–∑–¥–∞–Ω–æ –∏ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
- ‚úÖ **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ** - –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —á–µ—Ä–µ–∑ Supabase MCP

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è:

**–ú–∏–≥—Ä–∞—Ü–∏—è 025 - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã:**
- ‚úÖ –°–æ–∑–¥–∞–Ω–æ **20 –∏–Ω–¥–µ–∫—Å–æ–≤** –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ 4 GIN –∏–Ω–¥–µ–∫—Å–∞ –¥–ª—è –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞ (buildings, routes, blog_posts, architecture_news)
- ‚úÖ 1 GIST –∏–Ω–¥–µ–∫—Å –¥–ª—è –≥–µ–æ–ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (route_points)
- ‚úÖ 10+ B-tree –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è: cube, earthdistance
- ‚úÖ –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ `check_search_indexes()` —Å–æ–∑–¥–∞–Ω–∞

**–ú–∏–≥—Ä–∞—Ü–∏—è 026 - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è RLS:**
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ **31 RLS –ø–æ–ª–∏—Ç–∏–∫–∞** –¥–ª—è **8 —Ç–∞–±–ª–∏—Ü**:
  - profiles (3 –ø–æ–ª–∏—Ç–∏–∫–∏)
  - buildings (4 –ø–æ–ª–∏—Ç–∏–∫–∏)
  - building_reviews (4 –ø–æ–ª–∏—Ç–∏–∫–∏)
  - routes (5 –ø–æ–ª–∏—Ç–∏–∫)
  - notifications (3 –ø–æ–ª–∏—Ç–∏–∫–∏)
  - user_collections (5 –ø–æ–ª–∏—Ç–∏–∫)
  - blog_posts (4 –ø–æ–ª–∏—Ç–∏–∫–∏)
  - route_completions (3 –ø–æ–ª–∏—Ç–∏–∫–∏)
- ‚úÖ –ó–∞–º–µ–Ω–µ–Ω `auth.uid()` –Ω–∞ `(SELECT auth.uid())` –≤–æ –≤—Å–µ—Ö –ø–æ–ª–∏—Ç–∏–∫–∞—Ö
- ‚úÖ –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ `check_rls_optimization()` —Å–æ–∑–¥–∞–Ω–∞
- ‚úÖ **–í—Å–µ–≥–æ –≤ –ë–î:** 233 –ø–æ–ª–∏—Ç–∏–∫–∏ —Å auth.uid(), –∏–∑ –Ω–∏—Ö 226 –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏:**
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ç–∏–ø JSONB –¥–ª—è `blog_posts.content` (–ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ –∫ text)
- ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –∫–æ–ª–æ–Ω–∫–∞ `excerpt` –∏–∑ `architecture_news`
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫: `view_count` (–Ω–µ views_count), `play_count` (–Ω–µ listen_count)

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 27 –Ω–æ—è–±—Ä—è 2025 (–ø—è—Ç–∞—è —Å–µ—Å—Å–∏—è - –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã)
**–ü—Ä–æ–≥—Ä–µ—Å—Å:** ‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã –Ω–∞ 100%. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞–≤ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞. SEO –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑–æ–≤–æ–≥–æ —É—Ä–æ–≤–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞. OAuth –∫–æ–¥ –≥–æ—Ç–æ–≤. **‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ë–î (025, 026) –£–°–ü–ï–®–ù–û –ü–†–ò–ú–ï–ù–ï–ù–´. –°–æ–∑–¥–∞–Ω–æ 20 –Ω–æ–≤—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ 31 RLS –ø–æ–ª–∏—Ç–∏–∫–∞. –û–∂–∏–¥–∞–µ—Ç—Å—è —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ 2-100 —Ä–∞–∑.** –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ OAuth –∏ –∑–∞–ø—É—Å–∫—É.
