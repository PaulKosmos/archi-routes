/* üîß –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï —Å—Ç–∏–ª–∏ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –∑–¥–∞–Ω–∏–π –≤ –±–ª–æ–≥–µ */

@layer components {
  .building-mention {
    @apply cursor-pointer px-1 py-0.5 rounded transition-all duration-200;
    @apply bg-blue-50 text-blue-800 border-b-2 border-blue-300;
    @apply hover:bg-blue-100 hover:border-blue-400;
    text-decoration: none !important;
    position: relative;
    display: inline-block;
    font-weight: 600;
  }

  .building-mention:hover {
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(59, 130, 246, 0.2);
  }

  /* –°—Ç–∏–ª–∏ –¥–ª—è –∑–¥–∞–Ω–∏–π –≤ –º–∞—Ä—à—Ä—É—Ç–µ */
  .building-mention.in-route {
    @apply bg-green-50 text-green-800 border-green-300;
    @apply hover:bg-green-100 hover:border-green-400;
  }

  .building-mention.in-route:hover {
    box-shadow: 0 2px 4px rgba(34, 197, 94, 0.2);
  }

  /* üîß –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–¨: –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π */
  .building-mention-marker {
    @apply cursor-pointer px-1 py-0.5 rounded transition-all duration-200;
    @apply bg-blue-50 text-blue-800 border-b-2 border-blue-300;
    @apply hover:bg-blue-100 hover:border-blue-400;
    text-decoration: none !important;
    position: relative;
    display: inline-block;
    font-weight: 600;
  }
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è hover cards */
.building-hover-card {
  animation: buildingCardFadeIn 0.2s ease-out;
  z-index: 9999 !important; /* –£–±–µ–∂–¥–∞–µ–º—Å—è —á—Ç–æ –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–≤–µ—Ä—Ö –≤—Å–µ–≥–æ */
}

@keyframes buildingCardFadeIn {
  from {
    opacity: 0;
    transform: translateY(-10px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è –∑–¥–∞–Ω–∏–π –≤ —Ç–µ–∫—Å—Ç–µ —Å—Ç–∞—Ç—å–∏ */
.prose .building-mention {
  font-weight: 600;
  display: inline-block;
  margin: 0 1px; /* –ù–µ–±–æ–ª—å—à–æ–π –æ—Ç—Å—Ç—É–ø –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ */
}

/* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö */
@media (max-width: 640px) {
  .building-hover-card {
    width: 90vw !important;
    max-width: 320px;
    left: 5vw !important;
    right: 5vw !important;
    transform: translateX(0) !important;
  }
  
  .building-mention {
    padding: 2px 4px; /* –ë–æ–ª—å—à–µ –æ—Ç—Å—Ç—É–ø—ã –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö */
  }
}

/* üîß –£–õ–£–ß–®–ï–ù–ò–Ø –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ */
.building-mention[data-building-id] {
  /* –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –¥–ª—è –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö —É–ø–æ–º–∏–Ω–∞–Ω–∏–π */
  outline: 1px dotted rgba(59, 130, 246, 0.3);
  outline-offset: 1px;
}

.building-mention[data-building-id]:hover {
  outline-color: rgba(59, 130, 246, 0.6);
}

/* –°—Ç–∏–ª–∏ –¥–ª—è FAB –∫–Ω–æ–ø–∫–∏ */
.route-fab {
  animation: fabBounce 2s infinite;
}

@keyframes fabBounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-5px);
  }
  60% {
    transform: translateY(-3px);
  }
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∑–¥–∞–Ω–∏–π –≤ FAB */
.building-selection-item {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.building-selection-item:hover {
  transform: translateY(-2px);
}

.building-selection-item.selected {
  animation: selectionPulse 0.5s ease-out;
}

@keyframes selectionPulse {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.05);
  }
  100% {
    transform: scale(1);
  }
}

/* üîß –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –°–¢–ò–õ–ò –î–õ–Ø –û–¢–õ–ê–î–ö–ò */

/* Debug —Å—Ç–∏–ª–∏ –¥–ª—è development —Ä–µ–∂–∏–º–∞ */
@media screen {
  .building-mention::before {
    content: "üèóÔ∏è";
    font-size: 10px;
    position: absolute;
    top: -8px;
    left: -2px;
    opacity: 0;
    transition: opacity 0.2s;
  }
  
  .building-mention:hover::before {
    opacity: 0.7;
  }
}

/* –°—Ç–∏–ª–∏ –¥–ª—è —É—Å–ø–µ—à–Ω–æ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —É–ø–æ–º–∏–Ω–∞–Ω–∏–π */
@layer components {
  .building-mention-found {
    @apply bg-green-100 border-green-400;
    animation: foundPulse 1s ease-out;
  }
}

@keyframes foundPulse {
  0% { background-color: #dcfce7; }
  50% { background-color: #bbf7d0; }
  100% { background-color: #dcfce7; }
}

/* –°—Ç–∏–ª–∏ –¥–ª—è –∫–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ */
.building-hover-card.loading {
  opacity: 0.7;
}

.building-hover-card.loading::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  margin: -10px 0 0 -10px;
  border: 2px solid #f3f3f3;
  border-top: 2px solid #3498db;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}